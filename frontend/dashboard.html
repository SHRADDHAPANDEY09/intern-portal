<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Intern Dashboard</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
</head>

<body>
  <div class="dashboard-bg">
    <div class="dashboard-glass">
      <h1 class="title-glow">ğŸš€ Intern Dashboard ğŸš€</h1>

      <div class="dashboard-cards">

        <!-- Profile Card -->
        <div class="card glass-card pop-in">
          <h2><span class="emoji">ğŸ™‹â€â™‚ï¸</span> Profile</h2>
          <p><strong>Name:</strong> <span id="name">Loading...</span></p>
          <p><strong>Referral Code:</strong> <span id="referral">Loading...</span></p>
          <p><strong>Total Donations:</strong> â‚¹<span id="donations">0</span></p>
        </div>

        <!-- Rewards Card -->
        <div class="card glass-card pop-in" style="animation-delay: 0.12s">
          <h2><span class="emoji">ğŸ</span> Rewards & Unlockables</h2>
          <ul>
            <li class="reward">Gift Hamper unlocked at <strong>â‚¹5,000</strong></li>
            <li class="reward">Certificate of Appreciation at <strong>â‚¹10,000</strong></li>
          </ul>
        </div>

        <!-- Leaderboard Card -->
        <div class="card glass-card pop-in" style="animation-delay: 0.22s">
          <h2><span class="emoji">ğŸ†</span> Leaderboard</h2>
          <ol id="leaderboard">
            <li>Loading...</li>
          </ol>
        </div>

      </div>
    </div>
  </div>

  <!-- Fetch and display backend data -->
  <script>
    // Fetch intern info
    fetch('http://localhost:4000/api/intern')
      .then(res => res.json())
      .then(data => {
        document.getElementById('name').textContent = data.name;
        document.getElementById('referral').textContent = data.referralCode;
        document.getElementById('donations').textContent = data.donations;
      })
      .catch(() => {
        // Fallback if error
        document.getElementById('name').textContent = 'Error loading data';
        document.getElementById('referral').textContent = '-';
        document.getElementById('donations').textContent = '0';
      });

    // Fetch leaderboard
    fetch('http://localhost:4000/api/leaderboard')
      .then(res => res.json())
      .then(entries => {
        const list = document.getElementById('leaderboard');
        list.innerHTML = ''; // Clear loading text
        entries.forEach((entry, idx) => {
          const item = document.createElement('li');
          const medal = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'][idx] || 'ğŸ–ï¸';
          item.innerHTML = `<span class="medal">${medal}</span> <span class="lead-name">${entry.name}</span>: <span class="lead-amt">â‚¹${entry.donations}</span>`;
          list.appendChild(item);
        });
      })
      .catch(() => {
        const list = document.getElementById('leaderboard');
        list.innerHTML = '<li>Error loading leaderboard</li>';
      });
  </script>
</body>
</html>

